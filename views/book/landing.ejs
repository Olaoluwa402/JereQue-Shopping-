

<!--Slider-->
<div class="container-fluid">
	<div id="slides" class="carousel slide mb-4" data-ride="carousel">
	  <ol class="carousel-indicators">
	    <li data-target="#slides" data-slide-to="0" class="active"></li>
	    <li data-target="#slides" data-slide-to="1"></li>
	    <li data-target="#slides" data-slide-to="2"></li>
	    <li data-target="#slides" data-slide-to="3"></li>
	  </ol>
	  <div class="carousel-inner">
	    <div class="carousel-item active">
	      <img src="img/image1.jpg" class="" alt="...">
	    </div>
	    <div class="carousel-item">
	      <img src="img/image2.jpg" class="" alt="...">
	    </div>
	    <div class="carousel-item">
	      <img src="img/image3.jpg" class="" alt="...">
	    </div>
	     <div class="carousel-item">
	      <img src="img/image4.jpg" class="" alt="...">
	    </div>
	  </div>
	  <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
	    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
	    <span class="sr-only">Previous</span>
	  </a>
	  <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
	    <span class="carousel-control-next-icon" aria-hidden="true"></span>
	    <span class="sr-only">Next</span>
	  </a>
	</div>

		<!-- show all books -->
	


<div class="container-fluid mt-4 ">
    <div class="boxes1" id="books">
        
        	<% books.forEach(book => { %>
			 <div class="box1">
				  <img class="" style="width:100%; height: 55%" src="<%= book.image%>" alt="Card image cap">
				  <div class="">
				  	
				    <h5 class="pt-1"><strong><%=book.book_title%></strong></h5>
					<% if (book.rating === 0) { %>
					<em style="font-size:0.9rem;"><small>No reviews yet.</small></em>
					<% } else { %>
				    <span class="fa fa-star checked"></span>
                      <span class="fa fa-star <% if (book.rating > 1.5) { %> checked <% } %>"></span>
                      <span class="fa fa-star <% if (book.rating > 2.5) { %> checked <% } %>"></span>
                      <span class="fa fa-star <% if (book.rating > 3.5) { %> checked <% } %>"></span>
                      <span class="fa fa-star <% if (book.rating > 4.5) { %> checked <% } %>"></span>
						  <% } %>
					 <div class="availa float-right"><%= book.availability%></div>
                     <div><strong><span>&#8358</span><%= book.price%></strong></div>
				    <a href="/shop/add-to-cart/<%= book._id%>" class="btn btn-outline-info btn-sm">Add to Cart</a>
				    <a class="btn btn-info btn-sm"  href="/books/<%= book._id %>"> more info</a>
				  </div>
		  </div>
		<% }) %>
        
    </div>
   		 <!-- next/previous button -->
		<div class="row mt-2">
			<div class="col-md-6">
				<button type="button" class="btn btn-info" onClick="getPrevious()";>Previous</button>
			</div>
			<div class="col-md-6">
				<button type="button" class="btn btn-info float-right" onClick="getNext()";>Next</button>
			</div>
		</div>
</div>
</div>


<script>
	let page = 1; 
	let limit = <%= limitResult %>;
	let myTotal = <%= myTotal.length%>; 
	
	
 function getNext(){
 	if(page * limit < myTotal){
 		page++;


 		$.ajax({
            url: "/books/get-books/" + page + "/" + limit,
            type:"GET",
            success: function(response){
            	console.log(response);
            	 renderBooks(response);
            },
            error: function(jqXHR, textStatus, errorThrown){
            	console.log(jqXHR);
            	console.log(textStatus);
            	console.log(errorThrown);
            }
 
        });
 	 }
 		console.log("next page is" + page);
 	 
 }


 function getPrevious(){
 	if(page > 1){
 		page--;

 		$.ajax({
            url: "/books/get-books/" + page + "/" + limit,
            type:"GET",
            success: function(response){
            	console.log(response);
            	 renderBooks(response);
            },
            error: function(jqXHR, textStatus, errorThrown){
            	console.log(jqXHR);
            	console.log(textStatus);
            	console.log(errorThrown);
            }
 
        });
 	}
 		console.log("previous page is" + page);
 	
 }




	function renderBooks(books) {
		if(books.length > 0){
			let html ="";

			 for (let a=0; a < books.length; a++) {
				 html +='<div class="box1"> ';
				html +='  <img class="" style="width:100%; height: 55%" src="' +  books[a].image + '"alt="Card image cap">';
				html +='  <div class="">';
				  	
				  html +='<h5 class="pt-1"><strong>' + books[a].book_title + '</strong></h5>';
				     
                     html +='<div><strong><span>&#8358</span>' + books[a].price + '</strong></div>';
                       html +=' <div class="availa">' + books[a].availability + '</div>';
				   html +=' <a href="/shop/add-to-cart/' + books[a]._id + '"' + 'class="btn btn-outline-info btn-sm">Add to Cart</a>';
				  html +='  <a class="btn btn-info btn-sm"  href="/books/' + books[a]._id + '">' + ' more info</a>';
				  html +=' </div>';
				 html +=' </div>';
			}

			 $("#books").html(html);
	}
}

	
   
</script>



